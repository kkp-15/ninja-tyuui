<!DOCTYPE html><html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>⚠️ クリックジャッキング体験（安全デモ）｜1Passwordの候補を“乗っ取る”とは？</title>
  <meta name="description" content="クリックジャッキングの仕組みを10秒で体験。実データ送信なし・外部通信なし・実UI呼び出しなしの安全デモ。対策：候補の自動表示オフ／Exact hostなど。" />
  <!-- ✅ このページは実データ送信を一切しません（CSPでフォーム送信＆外部通信をブロック） -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' data:; img-src 'self' data:; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline'; connect-src 'none'; form-action 'none'; frame-src 'none'; object-src 'none'; base-uri 'none'">
  <meta name="theme-color" content="#0f172a" />
  <style>
    :root{--bg:#0b1220;--panel:#0f172a;--text:#e5e7eb;--muted:#a5b4fc;--accent:#60a5fa;--good:#34d399;--warn:#fbbf24;--bad:#f87171;--border:rgba(255,255,255,.09)}
    @media (prefers-color-scheme: light){:root{--bg:#f8fafc;--panel:#ffffff;--text:#0f172a;--muted:#4f46e5;--accent:#2563eb;--good:#059669;--warn:#d97706;--bad:#dc2626;--border:rgba(15,23,42,.12)}}
    html,body{height:100%}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans JP","Hiragino Kaku Gothic ProN",Meiryo,sans-serif;color:var(--text);background:var(--bg);line-height:1.6;overflow-x:hidden}
    .wrap{max-width:720px;margin:0 auto;padding:18px}
    header{position:sticky;top:0;z-index:10;backdrop-filter:saturate(1.2) blur(8px);background:color-mix(in oklab,var(--panel) 88%,transparent);border-bottom:1px solid var(--border)}
    header .inner{display:flex;gap:10px;align-items:center;padding:10px 12px}
    .badge{display:inline-flex;gap:6px;align-items:center;padding:6px 10px;border-radius:999px;border:1px solid var(--border);background:linear-gradient(180deg, color-mix(in oklab,var(--panel) 92%,transparent), color-mix(in oklab,var(--bg) 90%,transparent));font-size:.86rem}
    .dot{width:8px;height:8px;border-radius:50%;background:var(--good);box-shadow:0 0 8px var(--good)}
    h1{font-size:1.5rem;margin:14px 0 6px}
    h2{font-size:1.2rem;margin:16px 0 8px}
    .panel{background:linear-gradient(180deg,color-mix(in oklab,var(--panel) 96%,transparent),color-mix(in oklab,var(--panel) 90%,transparent));border:1px solid var(--border);border-radius:14px;padding:14px}
    .hero{margin:14px 0}
    .list{padding-left:18px}
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 14px;border-radius:999px;border:1px solid var(--border);background:linear-gradient(180deg,color-mix(in oklab,var(--panel) 92%,transparent),color-mix(in oklab,var(--bg) 90%,transparent));color:var(--text);cursor:pointer;text-decoration:none}
    .btn.warn{border-color:color-mix(in oklab,var(--warn) 40%,var(--border))}
    .note{font-size:.92rem;opacity:.9}
    .safe-grid{display:grid;gap:8px}
    @media(min-width:700px){.safe-grid{grid-template-columns:1fr 1fr}}
    .ok{border-left:4px solid var(--good);padding:10px;background:color-mix(in oklab,var(--panel) 86%,transparent);border-radius:10px}
    .demo{position:relative;border:1px dashed var(--border);border-radius:12px;padding:14px;margin-top:8px}
    .field{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    .pill{padding:8px 12px;border-radius:999px;border:1px solid var(--border);background:rgba(255,255,255,.06)}
    .overlay{position:absolute;inset:0;display:none}
    .overlay.active{display:block}
    .overlay .ghost{position:absolute;right:14px;top:72px;width:200px;height:40px;background:rgba(255,255,255,.03);border:1px dashed rgba(255,255,255,.25);border-radius:8px}
    .overlay .hint{position:absolute;right:14px;top:42px;font-size:.85rem;color:var(--warn)}
    .log{font-family:ui-monospace,Menlo,Consolas,monospace;background:color-mix(in oklab,var(--panel) 82%,transparent);border:1px solid var(--border);border-radius:10px;padding:10px;min-height:72px;white-space:pre-wrap}
    .watermark{position:fixed;inset:auto -40px 20px auto;rotate:-8deg;opacity:.08;font-weight:900;font-size:42px;pointer-events:none}
    footer{margin:26px 0 40px;opacity:.9}
    #footer{margin-top:14px;text-align:center;opacity:.9}
  </style>
</head>
<body>
  <header>
    <div class="inner wrap" style="padding-left:0;padding-right:0">
      <span class="badge"><span class="dot"></span>100%安全なデモ（送信なし）</span>
      <strong style="margin-left:8px">クリックジャッキング体験</strong>
    </div>
  </header>  <main class="wrap">
    <section class="panel hero">
      <h1>“透明レイヤーでクリックを奪う”を、かんたん体験</h1>
      <p class="note">このページは <strong>実データ送信なし・外部通信なし・実1Password UI呼び出しなし</strong> の安全な疑似体験サイトです。仕組みだけ理解できます。</p>
    </section><section class="panel">
  <h2>なぜ安全？（ここがポイント）</h2>
  <div class="safe-grid">
    <div class="ok">フォーム送信は<strong>CSPで禁止</strong>（<code>form-action 'none'</code>）。</div>
    <div class="ok">外部通信（XHR/fetch/WebSocket）は<strong>禁止</strong>（<code>connect-src 'none'</code>）。</div>
    <div class="ok">実際の1Password候補は<strong>出しません</strong>（モックのボタンのみ）。</div>
    <div class="ok">スクリプト/スタイルは<strong>このファイル内のみ</strong>、外部読み込みなし。</div>
  </div>
</section>

<section class="panel" id="demo">
  <h2>10秒デモ</h2>
  <ol class="list">
    <li>まず「悪用レイヤーをON」にします。</li>
    <li>次に「候補（モック）をクリック」を押します。</li>
    <li>クリックが<strong>透明ボタンに奪われた</strong>ログが出たら成功！</li>
  </ol>
  <div class="demo">
    <div class="overlay" id="overlay" aria-hidden="true">
      <span class="hint">👻 透明の偽ボタン（ここにかぶせてあります）</span>
      <div class="ghost" aria-hidden="true"></div>
    </div>
    <div class="field" style="margin-bottom:8px">
      <button class="btn warn" id="toggle" type="button">悪用レイヤー：OFF</button>
      <span class="pill">メール：you@example.com</span>
      <span class="pill">パスワード：••••••</span>
    </div>
    <div class="field">
      <button class="btn" id="mock" type="button">候補（モック）をクリック</button>
      <button class="btn" id="reset" type="button">ログを消す</button>
    </div>
    <div id="log" class="log" aria-live="polite" style="margin-top:10px"></div>
  </div>
  <p class="note" style="margin-top:8px">※ 実1Passwordを呼び出す「開発者向け検証モード」は省略しています（安全優先）。必要なら別途ご案内します。</p>
</section>

<section class="panel">
  <h2>実害を防ぐには（実運用のコツ）</h2>
  <ul class="list">
    <li><strong>候補の自動表示をオフ</strong>（拡張の <em>Settings → Autofill &amp; save</em>）。</li>
    <li>各アイテムは<strong>Exact host</strong>に限定／怪しいサイトは<strong>Never fill</strong>。</li>
    <li>初見サイトでは拡張を<strong>ロック維持</strong>→必要時のみ解錠。</li>
    <li>ツールバー／ショートカットから<strong>手動で呼び出す</strong>運用に。</li>
  </ul>
</section>

<section class="panel" id="dev">
  <h2>検証モード（カード候補を“実際に表示”）</h2>
  <p class="note"><strong>自己検証用・安全設計：</strong> このページは <code>form-action 'none'</code> と <code>connect-src 'none'</code> のCSPで送信・外部通信をブロックしています。<br>実カードは<strong>絶対に使わず</strong>、テスト番号（例：<code>4242 4242 4242 4242</code> など）で試してください。</p>
  <ol class="list">
    <li>1Passwordに <em>Credit Card</em> アイテムを1つ以上作成（テスト用ニックネーム推奨）。</li>
    <li>拡張を解錠し、<em>Settings → Autofill &amp; save</em> の <strong>Show autofill menu on field focus</strong> を <strong>一時的にON</strong>。</li>
    <li>下の <strong>カード番号欄</strong> をタップ／クリック→インライン候補にカードが表示されればOK。</li>
    <li>検証が終わったら <strong>Show autofill menu on field focus をOFF</strong> に戻す（常用はOFF推奨）。</li>
  </ol>
  <div class="demo" style="margin-top:8px">
    <div class="field" style="margin-bottom:6px"><span class="pill">支払いフォーム（ダミー）</span></div>
    <form onsubmit="event.preventDefault()">
      <div class="field" style="margin-bottom:8px">
        <label style="min-width:110px">名義（cc-name）</label>
        <input type="text" autocomplete="cc-name" placeholder="TARO KKP" inputmode="text" style="flex:1;padding:10px;border-radius:8px;border:1px solid var(--border);background:rgba(255,255,255,.06);color:var(--text)">
      </div>
      <div class="field" style="margin-bottom:8px">
        <label style="min-width:110px">番号（cc-number）</label>
        <input type="text" autocomplete="cc-number" placeholder="4242 4242 4242 4242" inputmode="numeric" style="flex:1;padding:10px;border-radius:8px;border:1px solid var(--border);background:rgba(255,255,255,.06);color:var(--text)">
      </div>
      <div class="field" style="margin-bottom:8px">
        <label style="min-width:110px">有効期限（cc-exp）</label>
        <input type="text" autocomplete="cc-exp" placeholder="12/29" inputmode="numeric" style="flex:1;padding:10px;border-radius:8px;border:1px solid var(--border);background:rgba(255,255,255,.06);color:var(--text)">
      </div>
      <div class="field">
        <label style="min-width:110px">CVC（cc-csc）</label>
        <input type="text" autocomplete="cc-csc" placeholder="123" inputmode="numeric" style="flex:1;padding:10px;border-radius:8px;border:1px solid var(--border);background:rgba(255,255,255,.06);color:var(--text)">
      </div>
      <div class="note" style="margin-top:10px">送信ボタンはありません（そもそもCSPで送信不可）。候補の表示だけを確認します。</div>
    </form>
  </div>
  <p class="note" style="margin-top:8px">Androidで試す場合：OSの「自動入力サービス」を1Passwordに設定し、ブラウザ側の自動入力はOFFに。カード候補はキーボード上などに表示されます。</p>
</section>

<footer class="wrap">
  <div class="note">最終更新：<time datetime="2025-08-21T00:00:00+09:00">2025-08-21（JST）</time>｜このページは教育目的の安全デモです。</div>
  <div id="footer">
    X <a href="https://x.com/kkp_webninja" target="_blank" rel="noopener">@kkp_webninja</a><br>
    🏯 <a href="https://kkpwebninja.com" target="_blank" rel="noopener">web忍者の本丸</a>
  </div>
</footer>
<div class="watermark">DEMO / SAFE</div>

  </main>  <script>
    const overlay = document.getElementById('overlay');
    const logBox = document.getElementById('log');
    const log = (msg)=>{ const t = new Date().toLocaleTimeString(); logBox.textContent = `[${t}] ${msg}
` + logBox.textContent };

    document.getElementById('toggle').addEventListener('click', (e)=>{
      overlay.classList.toggle('active');
      const on = overlay.classList.contains('active');
      e.currentTarget.textContent = '悪用レイヤー：' + (on ? 'ON' : 'OFF');
      e.currentTarget.classList.toggle('warn', on);
      log('悪用レイヤーを ' + (on ? 'ON' : 'OFF') + ' にしました');
    });

    document.getElementById('mock').addEventListener('click', ()=>{
      if(overlay.classList.contains('active')){
        log('（クリックが透明ボタンに奪われました）→ 隠しフォームに入力＆送信された想定…');
        alert('デモ：透明レイヤーにクリックが奪われました');
      }else{
        log('候補を通常クリック：問題なし（手動呼び出し運用は安全性が高い）');
      }
    });

    document.getElementById('reset').addEventListener('click', ()=>{ logBox.textContent=''; log('ログを初期化しました'); });
  </script></body>
</html>
